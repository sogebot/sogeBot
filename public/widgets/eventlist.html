<div class="widget">
  <h6 data-lang="eventlist"></h6>
  <ul class="nav nav-pills" role="tablist">
    <li role="presentation" class="nav-item">
      <a class="nav-link active" href="#eventlist-main" aria-controls="home" role="tab" data-toggle="tab" title="EventList">
        <i class="fa fa-calendar-o" aria-hidden="true"></i>
      </a>
    </li>
    <li role="presentation">
      <a class="nav-link" href="#eventlist-settings" aria-controls="home" role="tab" data-toggle="tab" title="Settings">
        <i class="fa fa-cog" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
  <!-- Tab panes -->
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="eventlist-main">
    </div>
    <!-- /MAIN -->

    <div role="tabpanel" class="tab-pane" id="eventlist-settings">
      <button type="button" class="btn btn-danger btn-block" onclick="deleteWidget('eventlist')" style="margin-top: 20px;" data-lang="remove-widget"></button>
    </div>
    <!-- /SETTINGS -->
  </div>
</div>

<script>
  //setInterval(function () {
  socket.emit('overlay.eventlist.get')
  //}, 1000)

  socket.on('overlay.eventlist', function (o) {
    let icons = {
      host: 'fa-bullhorn',
      follow: 'fa-heart',
      cheer: 'fa-diamond',
      sub: 'fa-star',
      resub: 'fa-star-half-o'
    }

    let iconsAnimation = {
      host: 'anim-shake',
      follow: 'anim-heartbeat',
      cheer: 'anim-float',
      sub: 'anim-spin',
      resub: 'anim-burst'
    }

    let colors = {
      follow: 'red',
      host: 'orange',
      sub: 'blue',
      resub: 'indigo',
      cheer: 'yellow'
    }

    let eventlist = $('#eventlist-main')
    eventlist.empty()

    let i = 0
    for (let event of o) {
      i++
      let icon = $('<i>')
        .addClass('fa')
        .addClass(icons[event.event])
        .addClass('text-' + colors[event.event])
        .addClass('eventlist-icon')
        .addClass(iconsAnimation[event.event])

      let username = $('<div>')
        .addClass('row')
        .addClass('eventlist-username')
        .html('<div class="col">' + event.username + '</div>')

      if (event.event === 'resub') {
        username.append($('<div class="w-100">'))
        username.append($('<div class="col">')
            .text(translations['events-months-of-subscription'] + ': ' + event.months)
            .css('font-size', "0.7rem")
            .css('font-weight', 'normal')
            .css('position', 'relative')
            .css('top', '-1.2rem'))
          .css('position', 'relative')
          .css('top', '.6rem')
      }

      if (event.event === 'cheer') {
        username.append($('<div class="w-100">'))
        username.append($('<div class="col">')
            .html('<i class="fa fa-diamond">' + '</i> ' + event.bits)
            .css('font-size', "0.7rem")
            .css('font-weight', 'normal')
            .css('position', 'relative')
            .css('top', '-1.2rem'))
          .css('position', 'relative')
          .css('top', '.6rem')
      }

      let colIcon = $('<div>')
        .addClass('col-auto')
        .append(icon)

      let row = $('<div>')
        .addClass('row')
        .append(colIcon)
        .append(username)

      eventlist.append(row)
      if (i >= 5) break
    }
  })

</script>
